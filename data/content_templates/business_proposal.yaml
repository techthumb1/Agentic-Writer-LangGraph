name: "Business Proposal Generator"
slug: "business_proposal"
version: "2.0"
template_type: "business_proposal"
id: "business_proposal"

description: >
  Professional business proposal generator. Creates formal business proposals and project proposals,
  not blog posts about business strategy.

# Inputs (resolved at runtime from request payload or style profile)
inputs:
  client_name: { required: true }
  project_type: { required: true }                # "consulting", "software_development", "marketing_campaign"
  problem_description: { required: true }
  proposal_tone: { default: "professional" }      # "formal", "collaborative", "innovative", "conservative"
  budget_range: { default: "tbd" }               # "under_10k", "10k_to_50k", "50k_to_100k", etc.
  timeline: { default: "3-months" }
  your_company: { default: "Your Company" }
  key_stakeholders: { optional: true }
  competitive_advantage: { optional: true }
  deliverables: { optional: true }
  payment_terms: { optional: true }
  # Optional user overrides
  include_case_studies: { optional: true }
  include_team_bios: { optional: true }
  risk_assessment: { optional: true }
  warranty_terms: { optional: true }

# Priority-based requirement resolution
requirements:
  min_words:
    priority:
      - dynamic.min_words
      - style.length_limit.target
      - 2500
  min_sections:
    priority:
      - dynamic.min_sections
      - 6
  include_financials:
    priority:
      - dynamic.include_financials
      - true

# Template-specific writer instructions
writer_instructions:
  content_type: "business_proposal"               # CRITICAL: Actual business proposal document!
  format: "formal_proposal"
  include_executive_summary: true
  generate_realistic_pricing: true
  create_professional_structure: true
  focus_on_client_value:
    priority:
      - dynamic.focus_on_client_value
      - true

mcp:
  tool_sequence:
    priority:
      - dynamic.tool_sequence
      - [business_analyzer, pricing_calculator, proposal_optimizer]

sections:
  order:
    priority:
      - dynamic.section_order
      - ["executive_summary", "problem_statement", "proposed_solution", "timeline_budget", "team_qualifications", "next_steps"]

prompt_schema:
  system_preamble: |
    You are a senior business development professional and proposal writer. Create compelling, professional
    business proposals that win contracts. Generate actual proposal documents with specific recommendations,
    pricing, and implementation plans - not explanatory content about business proposals.

  content_template: |
    # Business Proposal for {{client_name}}
    **{{project_type}} Project Proposal**

    ## Executive Summary
    {{executive_summary}}

    ## Problem Statement
    {{problem_statement}}

    ## Proposed Solution
    {{proposed_solution}}

    ## Timeline & Budget
    {{timeline_budget}}

    ## Team & Qualifications
    {{team_qualifications}}

    ## Investment & ROI
    {{investment_roi}}

    ## Next Steps
    {{next_steps}}

    ## Terms & Conditions
    {{terms_conditions}}

  placeholders:
    - client_name
    - project_type
    - executive_summary
    - problem_statement
    - proposed_solution
    - timeline_budget
    - team_qualifications
    - investment_roi
    - next_steps
    - terms_conditions

output:
  format: "markdown"
  require:
    executive_summary: true
    specific_deliverables: true
    pricing_details: true
    clear_next_steps: true

# === WriterzRoom enterprise output controls ===
post_config:
  enabled: false        # set to true in social_media_campaign.yaml
  min_posts: 3          # used only when enabled
  max_posts: 5          # used only when enabled
  paragraph_length: short   # short | medium | long
  per_post_requirements:
    min_words: 60
    max_words: 120
  composition:
    include_cta: true
    include_hashtags: 3      # 0 = none
    include_links: optional  # optional | required | none

output_policy:
  no_code: true          # enforce: remove code blocks/inlines
  max_bullets: 0         # 0 for social; you can set 6+ on longform templates
  min_paragraphs: 3      # minimum paragraphs after sanitation
  paragraph_first: true  # prefer paragraphs over lists

# Optional: planner override keys (validated upstream; no fallbacks here)
planner_overrides:
  planned_posts: null    # integer; must be within [min_posts, max_posts] when provided

