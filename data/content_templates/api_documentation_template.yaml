name: "API Documentation Template"
slug: "api_documentation_template"
version: "2.0"
template_type: "api_documentation"

description: >
  Professional API documentation generator. Creates actual API reference docs, not blog posts about APIs.
  Uses MCP tools for dynamic content generation.

# Inputs (resolved at runtime from request payload or style profile)
inputs:
  api_name: { required: true }
  api_domain: { default: "web_service" }          # "payments", "data", "messaging", "ai", etc.
  auth_type: { default: "api_key" }               # "api_key", "oauth", "jwt", "basic"
  programming_languages: { default: ["curl", "javascript", "python"] }
  base_url: { optional: true }
  version_number: { default: "v1" }
  include_sdks: { default: true }
  include_postman: { default: true }
  complexity_level: { default: "intermediate" }   # "beginner", "intermediate", "advanced"
  # Optional user overrides
  min_endpoints: { optional: true }
  code_examples_per_endpoint: { optional: true }
  include_webhooks: { optional: true }
  rate_limiting: { optional: true }

# Priority-based requirement resolution
requirements:
  min_endpoints:
    priority:
      - dynamic.min_endpoints
      - style.requirements.min_endpoints
      - 5
  min_words:
    priority:
      - dynamic.min_words
      - style.length_limit.target
      - 3000
  code_examples_per_endpoint:
    priority:
      - dynamic.code_examples_per_endpoint
      - 2

# Template-specific writer instructions
writer_instructions:
  content_type: "api_documentation"              # CRITICAL: Not a blog post!
  format: "reference_manual"
  include_working_examples: true
  generate_realistic_endpoints: true
  create_unique_api_structure: true
  enforce_technical_accuracy:
    priority:
      - dynamic.enforce_technical_accuracy
      - true

mcp:
  tool_sequence:
    priority:
      - dynamic.tool_sequence
      - [code_generator, api_validator, technical_reviewer]

sections:
  order:
    priority:
      - dynamic.section_order
      - ["overview", "authentication", "endpoints", "examples", "error_handling", "sdks_libraries"]

prompt_schema:
  system_preamble: |
    You are an expert API documentation specialist. Create comprehensive, professional API reference documentation
    that developers can immediately use to integrate with the API. Generate actual API documentation with working
    examples, not explanatory content about APIs.

  content_template: |
    # {{api_name}} API Documentation

    {{overview_section}}

    ## Authentication
    {{authentication_section}}

    ## Base URL
    {{base_url_section}}

    ## Endpoints
    {{endpoints_section}}

    ## Code Examples
    {{examples_section}}

    ## Error Handling
    {{error_handling_section}}

    ## SDKs & Libraries
    {{sdks_section}}

    ## Rate Limiting
    {{rate_limiting_section}}

  placeholders:
    - api_name
    - overview_section
    - authentication_section
    - base_url_section
    - endpoints_section
    - examples_section
    - error_handling_section
    - sdks_section
    - rate_limiting_section

output:
  format: "markdown"
  require:
    working_examples: true
    multiple_languages: true
    realistic_endpoints: true
    error_codes: true

knowledge_constraints:
  cutoff_date: "2025-01-31"
  current_date_context: true
  avoid_future_references: true

  # === WriterzRoom enterprise output controls ===
post_config:
  enabled: false        # set to true in social_media_campaign.yaml
  min_posts: 3          # used only when enabled
  max_posts: 5          # used only when enabled
  paragraph_length: short   # short | medium | long
  per_post_requirements:
    min_words: 60
    max_words: 120
  composition:
    include_cta: true
    include_hashtags: 3      # 0 = none
    include_links: optional  # optional | required | none

output_policy:
  no_code: true          # enforce: remove code blocks/inlines
  max_bullets: 0         # 0 for social; you can set 6+ on longform templates
  min_paragraphs: 3      # minimum paragraphs after sanitation
  paragraph_first: true  # prefer paragraphs over lists

# Optional: planner override keys (validated upstream; no fallbacks here)
planner_overrides:
  planned_posts: null    # integer; must be within [min_posts, max_posts] when provided
