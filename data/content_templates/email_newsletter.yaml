name: "Email Newsletter Generator"
slug: "email_newsletter"
version: "2.0"

description: >
  Email newsletter content generator. Creates actual newsletter content with subject lines and CTAs,
  not blog posts about email marketing.

# Inputs (resolved at runtime from request payload or style profile)
inputs:
  newsletter_type: { required: true }             # "weekly_roundup", "product_updates", "industry_news"
  primary_cta: { required: true }                # Main call-to-action for the newsletter
  target_audience: { required: true }
  tone: { default: "professional" }              # "friendly", "casual", "authoritative", "conversational"
  company_name: { default: "Your Company" }
  send_frequency: { default: "weekly" }          # "daily", "weekly", "bi_weekly", "monthly"
  personalization_level: { default: "medium" }   # "high", "medium", "low"
  content_focus: { optional: true }
  include_images: { default: true }
  # Optional user overrides
  subject_line_style: { optional: true }
  unsubscribe_reason: { optional: true }
  social_links: { optional: true }
  footer_content: { optional: true }

# Priority-based requirement resolution
requirements:
  min_words:
    priority:
      - dynamic.min_words
      - style.length_limit.target
      - 800
  subject_line_variants:
    priority:
      - dynamic.subject_line_variants
      - 3
  cta_count:
    priority:
      - dynamic.cta_count
      - 2

# Template-specific writer instructions
writer_instructions:
  content_type: "email_newsletter"                # CRITICAL: Actual newsletter content!
  format: "email_format"
  include_subject_lines: true
  optimize_for_engagement: true
  create_scannable_content: true
  focus_on_subscriber_value:
    priority:
      - dynamic.focus_on_subscriber_value
      - true

mcp:
  tool_sequence:
    priority:
      - dynamic.tool_sequence
      - [subject_line_optimizer, email_analyzer, engagement_tracker]

sections:
  order:
    priority:
      - dynamic.section_order
      - ["subject_lines", "opening", "main_content", "call_to_action", "closing", "footer"]

prompt_schema:
  system_preamble: |
    You are an email marketing specialist and newsletter writer. Create engaging newsletter content that
    drives opens, clicks, and conversions. Generate actual newsletter copy with subject lines, body content,
    and CTAs - not explanatory content about email marketing.

  content_template: |
    # {{newsletter_type}} Newsletter

    ## Subject Line Options
    {{subject_lines}}

    ## Newsletter Content

    ### Opening
    {{opening_section}}

    ### Main Content
    {{main_content}}

    ### Call-to-Action
    {{cta_section}}

    ### Closing & Footer
    {{closing_footer}}

    ## Performance Notes
    {{performance_notes}}

  placeholders:
    - newsletter_type
    - subject_lines
    - opening_section
    - main_content
    - cta_section
    - closing_footer
    - performance_notes

output:
  format: "markdown"
  require:
    subject_line_options: true
    scannable_format: true
    clear_ctas: true
    email_optimized: true